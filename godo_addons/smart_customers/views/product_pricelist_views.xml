<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data> 
        <record id="product_pricelist_view_tree" model="ir.ui.view">
            <field name="name">product.pricelist.tree.inherit</field>
            <field name="model">product.pricelist</field>
            <field name="inherit_id" ref="product.product_pricelist_view_tree"/>
            <field name="arch" type="xml">
                <tree string="Products Price List">
                    <field name="sequence" widget="handle" /> 
                    <field name="discount_policy" groups="product.group_discount_per_so_line"/> 
                    <field name="company_id" groups="base.group_multi_company"/>
                    <field name="only_service_pricelist" />
                    <field name="affiliate_award_point" /> 
                    <field name="in_use" />
                </tree>
            </field>
        </record>

        <record id="product_pricelist_view_form" model="ir.ui.view">
            <field name="name">product.pricelist.form</field>
            <field name="model">product.pricelist</field>
            <field name="inherit_id" ref="product.product_pricelist_view"/>
            <field name="arch" type="xml">
                <xpath expr="//form/sheet/div[@class='oe_title']/h1" position="after">   
                    <div class="mt-3">
                        <field name="only_service_pricelist"/>       
                        <label for="only_service_pricelist"/> 
                    </div>       
                </xpath>

                <xpath expr="//form/sheet/div[@class='oe_title']" position="after">                  
                        <group  attrs="{'invisible': [('only_service_pricelist', '=', False)]}" >
                            <group >
                                <field class="affiliate_award_point"    attrs="{'invisible': [('only_service_pricelist', '=', False)]}" name="affiliate_award_point"/>
                            </group>

                            <group>
                                <field class="in_use"    attrs="{'invisible': [('only_service_pricelist', '=', False)]}" name="in_use"/>
                            </group> 
                        </group>  
                </xpath>

                <xpath expr="//form/sheet/notebook/page[@name='pricelist_rules']/field[@name='item_ids']" position="replace">   
                            <field name="item_ids" nolabel="1" context="{'default_base':'list_price'}">
                                  <tree string="Pricelist Items" editable="bottom">
                                      <field name="product_tmpl_id" string="Products" required="1"/>
                                      <field name="product_id" string="Variants"
                                        groups="product.group_product_variant"
                                        domain="[('product_tmpl_id', '=', product_tmpl_id)]"
                                        options="{'no_create':1}"/>
                                      <field name="min_quantity"/>
                                      <field name="fixed_price" string="Price"/>
                                      <field name="award_point" />
                                      <field name="auto_verify" />
                                      <field name="currency_id" invisible="1"/>
                                      <field name="pricelist_id" invisible="1"/>
                                      <!-- Pricelist ID is here only for related fields to be correctly computed -->
                                      <field name="date_start"/>
                                      <field name="date_end"/>
                                      <field name="base" invisible="1"/>
                                      <field name="applied_on" invisible="1"/>
                                  </tree>
                            </field> 
                </xpath>

 
            </field>
        </record>

        <record id="product_pricelist_item_tree_view" model="ir.ui.view">
          <field name="name">product.pricelist.item.tree</field>
          <field name="model">product.pricelist.item</field>
          <field name="inherit_id" ref="product.product_pricelist_item_tree_view"/>
          <field name="priority">10</field>
          <field name="arch" type="xml">
            <tree string="Price Rules">
              <field name="award_point"/> 
              <field name="auto_verify"/> 
            </tree>
          </field>
        </record>


        <record id="product_pricelist_item_tree_view_from_product" model="ir.ui.view">
            <!-- Access and edit price rules from a given product/product variant -->
            <field name="name">product.pricelist.item.tree</field>
            <field name="model">product.pricelist.item</field>
            <field name="inherit_id" ref="product.product_pricelist_item_tree_view_from_product"/>
            <field name="priority">100</field>
            <field name="arch" type="xml">
                <tree string="Pricelist Items" editable="bottom">
                    <field name="award_point"/> 
                    <field name="auto_verify"/> 
                </tree>
            </field>
        </record>


        <record model="ir.ui.view" id="product_pricelist_view_search">
            <field name="name">product.pricelist.search.inherit</field>
            <field name="model">product.pricelist</field>
            <field name="arch" type="xml">
                <search string="Products Price Search">
                    <field name="name" string="Products Price"/>
                    <field name="currency_id" groups="base.group_multi_currency"/>
                    <filter string="Software Price List" name="only_service_pricelist" domain="[('only_service_pricelist','=',True)]"/>
                    <separator />
                    <group expand="1" string="Group By">
                        <filter string="In Use" name="in_use" context="{'group_by':'in_use'}"/>
                        <filter string="Product Category" name="categ_id" context="{'group_by':'categ_id'}"/>
                    </group>

                </search>
            </field>
        </record>


        <!-- <record id="product_pricelist_action_window_3" model="ir.actions.act_window">
            <field name="name">Software Pricelists</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">product.pricelist</field>
            <field name="view_mode">tree,form</field>
            <field name="search_view_id" ref="product_pricelist_view_search" />
            <field name="context">{"default_base":'list_price'}</field>
            <field name="help" type="html">
              <p class="o_view_nocontent_smiling_face">
                Create a new pricelist
              </p><p>
                A price is a set of sales prices or rules to compute the price of sales order lines based on products, product categories, dates and ordered quantities.
                This is the perfect tool to handle several pricings, seasonal discounts, etc.
              </p><p>
                You can assign pricelists to your customers or select one when creating a new sales quotation.
              </p>
            </field>
        </record>
   

        <record model="ir.actions.act_window.view" id="product_pricelist_action_window_tree">
            <field name="sequence" eval="1"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="product_pricelist_view_tree"/>
            <field name="act_window_id" ref="product_pricelist_action_window_3"/>
        </record>

        <record model="ir.actions.act_window.view" id="product_pricelist_action_window_form">
            <field name="sequence" eval="1"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="product_pricelist_view_form"/>
            <field name="act_window_id" ref="product_pricelist_action_window_3"/>
        </record> -->

    </data>
</odoo>